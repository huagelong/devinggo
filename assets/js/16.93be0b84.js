(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{379:function(e,s,t){"use strict";t.r(s);var a=t(14),i=Object(a.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("ul",[s("li",[e._v("基于redis")]),e._v(" "),s("li",[e._v("核心代码位于 modules/system/pkg/websocket")]),e._v(" "),s("li",[e._v("启动http同时也启动websocket服务 "),s("code",[e._v("go run main.go http")])]),e._v(" "),s("li",[e._v("支持分布式部署实现基于redis 发布订阅，因此此处redis不能使用分布式部署")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("也可以改写成rabbitmq,kafaka等队列，将modules/system/pkg/websocket/pubsub.go里面的SubscribeMessage,PublishMessage改写即可\n注意保证消息的顺序性\n")])])]),s("ul",[s("li",[e._v("config.yaml 配置")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('  websocket:\n    address: 106.14.10.255:6379\n    pass: "redis_Q2QSYN"\n    db: 7\n    minIdle: 10\n    maxIdle: 1000\n    maxActive: 5000\n    idleTimeout: 600s\n    waitTimeout: 30s\n    dialTimeout: 30s\n    readTimeout: 30s\n    writeTimeout: 30s\n')])])])])}),[],!1,null,null,null);s.default=i.exports}}]);