(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{374:function(e,t,s){"use strict";s.r(t);var a=s(14),r=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"生产部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生产部署"}},[e._v("#")]),e._v(" 生产部署")]),e._v(" "),t("h3",{attrs:{id:"初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始化"}},[e._v("#")]),e._v(" 初始化")]),e._v(" "),t("ol",[t("li",[e._v("从bin目录取出devinggo")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("cp devinggo /opt/devinggo/devinggo\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("初始化")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("cd /opt/devinggo/\nsudo chmod 0777 devinggo\n./devinggo unpack \n# 打开manifest/config/config.yaml，配置mysql or postgresql,redis，以及其他配置\n./devinggo migrate:up\n")])])]),t("h3",{attrs:{id:"使用systemclt"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用systemclt"}},[e._v("#")]),e._v(" 使用systemclt")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("#到代码根目录复制docs/devinggo.service 到 /opt/devinggo/，转到/opt/devinggo/目录\ncp devinggo.service /usr/lib/systemd/system/\nsudo systemctl daemon-reload\nsudo systemctl enable devinggo\nsudo systemctl start devinggo\n")])])]),t("h3",{attrs:{id:"使用-supervisor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-supervisor"}},[e._v("#")]),e._v(" 使用 Supervisor")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("#到代码根目录复制docs/devinggo.conf 到 /opt/devinggo/，转到/opt/devinggo/目录\ncp devinggo.conf /etc/supervisor/conf.d/\nsupervisorctl reload\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[e._v("官网 web\\site 目录")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("参见  https://nuxt.com.cn/docs/getting-started/deployment/\n\n")])])]),t("h2",{attrs:{id:"分端部署参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分端部署参考"}},[e._v("#")]),e._v(" 分端部署参考")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# 以debain12系统为例\n#编译后端\nrm -rf ./resource/public/admin\nrm -rf internal/packed/packed.go\ngo mod tidy\ngf build -ew\n#生成bin/v1.0.0/linux_amd64/devinggo 备用\n")])])]),t("h3",{attrs:{id:"编译前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译前端"}},[e._v("#")]),e._v(" 编译前端")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('cd web/admin\n#代码 web/admin/.env.production \n# VITE_APP_BASE="/"\n# VITE_APP_BASE_URL = http://127.0.0.1:8070\n# VITE_APP_WS_URL = ws://127.0.0.1:8070/ws\n# 127.0.0.1:8070 可以改成你自己的域名，如果使用https，http://改成https://，ws://改成wss://\nyarn install \nyarn build\n#生成web/admin/dist 备用\n')])])]),t("h3",{attrs:{id:"后端初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#后端初始化"}},[e._v("#")]),e._v(" 后端初始化")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("cp bin/v1.0.0/linux_amd64/devinggo /opt/devinggo/devinggo\ncd /opt/devinggo/\nsudo chmod 0777 devinggo\n./devinggo unpack \n# 打开manifest/config/config.yaml，配置mysql or postgresql,redis，以及其他配置\n./devinggo migrate:up\n")])])]),t("h3",{attrs:{id:"使用systemclt-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用systemclt-2"}},[e._v("#")]),e._v(" 使用systemclt")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("#到代码根目录复制docs/devinggo.service 到 /opt/devinggo/，转到/opt/devinggo/目录\ncp devinggo.service /usr/lib/systemd/system/\nsudo systemctl daemon-reload\nsudo systemctl enable devinggo\nsudo systemctl start devinggo\n")])])]),t("h3",{attrs:{id:"部署前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署前端"}},[e._v("#")]),e._v(" 部署前端")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("cp -R web/admin/dist /opt/devinggo/devinggo_admin\n")])])]),t("h3",{attrs:{id:"nginx-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-配置"}},[e._v("#")]),e._v(" nginx 配置")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('server {\n        listen 80;\n        server_name xxx.com;\n        root /opt/devinggo/devinggo_admin/dist;\n        index index.html;\n\n   # 如果使用 history 模式路由\n   #     location / {\n   #         try_files $uri $uri/ /index.html;\n   #    }\n\n        location /uploads/ {\n            proxy_pass http://127.0.0.1:8070/uploads/;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n        }\n\n        location /api/ {\n            proxy_pass http://127.0.0.1:8070/api/;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n        }\n\n        location /ws {\n        proxy_pass http://127.0.0.1:8070/ws;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        \n        # WebSocket支持\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection "upgrade";\n        proxy_read_timeout 86400;\n      }\n\n       location /system/ {\n        proxy_pass http://127.0.0.1:8070/system/;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n')])])])])}),[],!1,null,null,null);t.default=r.exports}}]);