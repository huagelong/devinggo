---
title: websocket服务器
date: 2025-01-07 17:39:25
permalink: /pages/90e340/
---
- 基于redis
- 核心代码位于 modules/system/pkg/websocket
- 启动http同时也启动websocket服务 `go run main.go http`
- 支持分布式部署实现基于redis 发布订阅，因此此处redis不能使用分布式部署

```
也可以改写成rabbitmq,kafaka等队列，将modules/system/pkg/websocket/pubsub.go里面的SubscribeMessage,PublishMessage改写即可
注意保证消息的顺序性
```
- config.yaml 配置

```
  websocket:
    address: 106.14.10.255:6379
    pass: "redis_Q2QSYN"
    db: 7
    minIdle: 10
    maxIdle: 1000
    maxActive: 5000
    idleTimeout: 600s
    waitTimeout: 30s
    dialTimeout: 30s
    readTimeout: 30s
    writeTimeout: 30s
``` 